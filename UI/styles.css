/* styles.css - Publication-Quality Scientific UI for NonBDNAFinder 2025.1 */
/* Designed to meet Nature/Science/Cell journal visualization standards */

/* NOTE: !important declarations are required throughout this file to override
   Streamlit's inline styles and default styling. While not ideal, this is necessary
   for custom styling in Streamlit applications. */

/* ═══════════════════════════════════════════════════════════════
   SCIENTIFIC TYPOGRAPHY - Publication Grade
   Reference: Nature Methods style guidelines
   ═══════════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap');

:root {
    /* Scientific color palette - colorblind-safe */
    --sci-blue: #0072B2;
    --sci-orange: #E69F00;
    --sci-green: #009E73;
    --sci-purple: #7C3AED;
    --sci-red: #CC79A7;
    --sci-cyan: #56B4E9;
    --sci-dark: #1e293b;
    --sci-gray: #64748b;
    
    /* UI colors */
    --gradient-primary: linear-gradient(135deg, #1e40af 0%, #7c3aed 100%);
    --gradient-success: linear-gradient(135deg, #059669 0%, #10b981 100%);
    --gradient-accent: linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%);
    
    /* Shadows for depth */
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
    --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
    --shadow-glow: 0 0 20px rgba(124, 58, 237, 0.15);
}

/* ═══════════════════════════════════════════════════════════════
   HIDE SIDEBAR NAVIGATION
   ═══════════════════════════════════════════════════════════════ */

/* Hide the auto-generated sidebar from multi-page apps */
section[data-testid="stSidebar"] {
    display: none !important;
}

/* ═══════════════════════════════════════════════════════════════
   STREAMLIT TAB STYLING - VIBRANT AND READABLE
   ═══════════════════════════════════════════════════════════════ */

/* Tab Container - Ensure Tabs Are Fully Visible Without Clipping */
.stTabs [data-baseweb="tab-list"] {
    gap: 6px !important;
    width: 100% !important;
    display: flex !important;
    justify-content: space-evenly !important;
    overflow: visible !important;
    padding: 8px 6px !important;
    background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%) !important;
    border-radius: 16px !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* Individual Tab Buttons - Vibrant but Readable */
.stTabs [data-baseweb="tab"] {
    height: auto !important;
    padding: 8px 10px !important;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%) !important;
    border: 2px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 12px !important;
    font-size: 1.08rem !important;
    font-weight: 700 !important;
    letter-spacing: 0.01em !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    flex: 1 1 0 !important;
    min-width: 0 !important;
    margin: 0 3px !important;
    white-space: normal !important;
    overflow: visible !important;
    text-align: center !important;
    word-break: break-word !important;
    color: rgba(255, 255, 255, 0.85) !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
    position: relative !important;
}

/* Tab Hover State - Vibrant Glowing Effect */
.stTabs [data-baseweb="tab"]:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%) !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 
        0 4px 15px rgba(102, 126, 234, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
    border-color: rgba(255, 255, 255, 0.4) !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
}

/* Active Tab - Vibrant Gradient Background */
.stTabs [data-baseweb="tab"][aria-selected="true"] {
    background: linear-gradient(135deg, #00C9FF 0%, #00D4AA 50%, #00E676 100%) !important;
    color: #000000 !important;
    font-weight: 800 !important;
    font-size: 1.08rem !important;
    transform: translateY(-1px) !important;
    box-shadow: 
        0 4px 15px rgba(0, 201, 255, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
    border: 2px solid rgba(255, 255, 255, 0.6) !important;
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.4) !important;
}

/* Tab Panel - Minimal Top Padding for Compactness */
.stTabs [data-baseweb="tab-panel"] {
    padding-top: 0.5rem !important;
}

/* Tab Underline - Remove Default */
.stTabs [data-baseweb="tab-highlight"] {
    display: none !important;
}

/* Tab Text Styling Override */
.stTabs [data-baseweb="tab"] p {
    font-size: 1.08rem !important;
    font-weight: 700 !important;
    margin: 0 !important;
    white-space: normal !important;
    word-break: break-word !important;
    text-align: center !important;
}

.stTabs [data-baseweb="tab"][aria-selected="true"] p {
    font-size: 1.08rem !important;
}

/* Accessibility: Reduced Motion Support for Vestibular Disorders */
@media (prefers-reduced-motion: reduce) {
    .stTabs [data-baseweb="tab"] {
        transition: background 0.1s ease, color 0.1s ease !important;
    }
    
    .stTabs [data-baseweb="tab"]:hover {
        transform: none !important;
    }
    
    .stTabs [data-baseweb="tab"][aria-selected="true"] {
        animation: none !important;
        transform: none !important;
    }
}

/* ═══════════════════════════════════════════════════════════════
   HEADING STYLING - BOLD, ENLARGED, AND VIBRANT
   ═══════════════════════════════════════════════════════════════ */

/* All Headings - Base Styles */
h1, h2, h3, h4, h5, h6 {
    font-weight: 800 !important;
    letter-spacing: -0.02em !important;
    line-height: 1.2 !important;
    margin-top: 0.25rem !important;
    margin-bottom: 0.4rem !important;
}

/* H1 - Largest and Most Prominent */
h1 {
    font-size: 3.5rem !important;
    font-weight: 900 !important;
    color: #667eea;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* H2 - Section Headers */
h2 {
    font-size: 2.6rem !important;
    font-weight: 800 !important;
    color: #2d3748 !important;
    border-left: 6px solid #00C9FF;
    padding-left: 1rem !important;
}

/* H3 - Subsection Headers */
h3 {
    font-size: 2.0rem !important;
    font-weight: 800 !important;
    color: #2d3748 !important;
}

/* H4 - Smaller Headers */
h4 {
    font-size: 1.6rem !important;
    font-weight: 700 !important;
    color: #4a5568 !important;
}

/* ═══════════════════════════════════════════════════════════════
   COMPACT SPACING FOR OVERALL LAYOUT
   ═══════════════════════════════════════════════════════════════ */

/* Ensure tabs container is fully visible */
.stTabs {
    margin-top: 0.5rem !important;
    overflow: visible !important;
}

/* Reduce Streamlit Default Padding - Combined rules for clarity */
.main .block-container {
    max-width: 100% !important;
    padding: 1.2rem 1.8rem 0.8rem 1.8rem !important;
}

/* Compact Element Spacing */
.element-container {
    margin-bottom: 0.25rem !important;
}

/* Global body text size increase for all pages */
p, span, label, li, td, th {
    font-size: 1.0rem !important;
    line-height: 1.6 !important;
}

/* ═══════════════════════════════════════════════════════════════
   DENSE MOTIF SELECTOR TABLE
   NOTE: Uses Streamlit internal class names which may change between versions.
   Tested with Streamlit >= 1.28.0. Update selectors if styling breaks after upgrade.
   ═══════════════════════════════════════════════════════════════ */

/* Compact data editor for motif selector */
.motif-selector-table .stDataFrame {
    max-height: 350px !important;
    overflow-y: auto !important;
}

/* Dense table styling */
.motif-selector-table td,
.motif-selector-table th {
    padding: 4px 8px !important;
    font-size: 0.85rem !important;
}

/* Highlight rows by motif class - alternating group colors */
.motif-selector-table tr:nth-child(even) {
    background-color: rgba(59, 130, 246, 0.05) !important;
}

/* ═══════════════════════════════════════════════════════════════
   COMPACT SUBMOTIF SELECTOR GRID
   High-density 24-class visibility without scrolling
   Radio-dot style checkbox with class color glow
   ═══════════════════════════════════════════════════════════════ */

/* Compact checkbox styling for submotif selector grid */
.submotif-grid .stCheckbox {
    margin-bottom: 0 !important;
    padding: 0 !important;
}

.submotif-grid .stCheckbox label {
    font-size: 0.65rem !important;
    line-height: 1.1 !important;
    padding: 1px 0 !important;
}

.submotif-grid .stCheckbox label p {
    margin-bottom: 0 !important;
    font-size: 0.65rem !important;
}

/* High-density column spacing for submotif selector grid */
.submotif-grid [data-testid="column"] {
    padding-left: 2px !important;
    padding-right: 2px !important;
}

/* Reduce vertical gaps in submotif grid rows */
.submotif-grid [data-testid="stHorizontalBlock"] {
    gap: 0.15rem !important;
    margin-bottom: 0.15rem !important;
}

/* Radio-dot checkbox styling - Convert square checkbox to circular dot */
/* Target the checkbox indicator span element */
.submotif-grid [data-testid="stCheckbox"] > label > span:first-child {
    width: 16px !important;
    height: 16px !important;
    min-width: 16px !important;
    min-height: 16px !important;
    border-radius: 50% !important;
    border: 2px solid #94a3b8 !important;
    background: transparent !important;
    transition: all 0.2s ease !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Hide the default SVG checkmark icon */
.submotif-grid [data-testid="stCheckbox"] > label > span:first-child svg {
    display: none !important;
}

/* Checked state - filled dot with glow effect */
/* Using aria-checked attribute which Streamlit sets on checkboxes */
.submotif-grid [data-testid="stCheckbox"] > label[data-baseweb="checkbox"] > span:first-child,
.submotif-grid [data-testid="stCheckbox"]:has(input:checked) > label > span:first-child {
    border-color: #3b82f6 !important;
    background: #3b82f6 !important;
    box-shadow: 0 0 14px rgba(59, 130, 246, 0.6) !important;
}

/* Hover state - subtle glow preview */
.submotif-grid [data-testid="stCheckbox"] > label:hover > span:first-child {
    border-color: #64748b !important;
    transform: scale(1.05) !important;
}

/* ═══════════════════════════════════════════════════════════════
   INLINE TOGGLE BAR - Analysis Options
   ═══════════════════════════════════════════════════════════════ */

/* Toggle bar container */
.toggle-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 6px 10px;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    margin: 6px 0;
}

/* Individual toggle chip */
.toggle-chip {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

/* Toggle chip - enabled state */
.toggle-chip--enabled {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);
}

/* Toggle chip - disabled state */
.toggle-chip--disabled {
    background: #f1f5f9;
    color: #64748b;
    border: 1px solid #cbd5e1;
}

/* Toggle chip hover */
.toggle-chip:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Toggle icon */
.toggle-chip__icon {
    font-size: 0.8rem;
}

/* ═══════════════════════════════════════════════════════════════
   HORIZONTAL METRICS STRIP - Analysis Complete Dashboard
   ═══════════════════════════════════════════════════════════════ */

/* Horizontal metrics container */
.metrics-strip {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding: 8px;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    border-radius: 12px;
    margin: 8px 0;
    justify-content: space-between;
}

/* Individual metric card - compact horizontal */
.metric-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 6px 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    min-width: 90px;
    flex: 1;
}

/* Metric icon */
.metric-card__icon {
    font-size: 0.95rem;
    margin-bottom: 2px;
}

/* Metric value */
.metric-card__value {
    font-size: 0.9rem;
    font-weight: 700;
    color: white;
    text-align: center;
}

/* Metric label */
.metric-card__label {
    font-size: 0.6rem;
    color: rgba(255, 255, 255, 0.7);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    text-align: center;
    margin-top: 1px;
}

/* Success state for metrics strip */
.metrics-strip--success {
    background: linear-gradient(135deg, #065f46 0%, #047857 100%);
    border: 2px solid #10b981;
}

/* Responsive: Stack on very small screens (mobile portrait) */
@media (max-width: 480px) {
    .metrics-strip {
        flex-direction: column;
    }
    .metric-card {
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
    }
}

/* ═══════════════════════════════════════════════════════════════
   PROGRESS PANEL STYLING
   ═══════════════════════════════════════════════════════════════ */

/* Progress panel base */
.progress-panel {
    padding: 10px;
    border-radius: 12px;
    margin: 8px 0;
}

/* Progress panel title */
.progress-panel__title {
    font-size: 1.15rem !important;
    font-weight: 700 !important;
    margin-bottom: 5px !important;
    color: white !important;
}

/* Progress panel subtitle */
.progress-panel__subtitle {
    font-size: 0.8rem;
    opacity: 0.9;
    margin-bottom: 8px;
}

/* Success state */
.progress-panel--success {
    background: linear-gradient(135deg, #065f46 0%, #047857 100%);
    color: white;
    border: 2px solid #10b981;
}

/* Stats grid - wide layout for dashboard */
.stats-grid--wide {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
    gap: 8px;
    margin-top: 8px;
}

/* Stat card in grid */
.stats-grid .stat-card {
    background: rgba(255, 255, 255, 0.15);
    padding: 6px 8px;
    border-radius: 8px;
    text-align: center;
}

/* Stat card value */
.stat-card__value {
    font-size: 0.95rem;
    font-weight: 700;
    color: white;
}

/* Stat card label */
.stat-card__label {
    font-size: 0.65rem;
    color: rgba(255, 255, 255, 0.8);
    margin-top: 2px;
}

/* ═══════════════════════════════════════════════════════════════
   ANALYSIS GRANULARITY - COMPACT COLORFUL PILL TOGGLE
   ═══════════════════════════════════════════════════════════════ */

/* Style the Streamlit pills for granularity selector - elegant gradient pills */
[data-testid="stPills"] [role="group"] {
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%) !important;
    padding: 4px !important;
    border-radius: 12px !important;
    gap: 4px !important;
    border: 1px solid #cbd5e1 !important;
    display: inline-flex !important;
}

/* Individual pill buttons - base state */
[data-testid="stPills"] button {
    background: transparent !important;
    border: none !important;
    border-radius: 10px !important;
    padding: 8px 18px !important;
    font-weight: 700 !important;
    font-size: 0.88rem !important;
    letter-spacing: -0.01em !important;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
    color: #64748b !important;
}

/* Pill button hover state */
[data-testid="stPills"] button:hover {
    background: rgba(255, 255, 255, 0.85) !important;
    color: #334155 !important;
}

/* Active/selected pill - vibrant gradient */
[data-testid="stPills"] button[aria-pressed="true"],
[data-testid="stPills"] button[data-active="true"],
[data-testid="stPills"] button.st-emotion-cache-1f9gpgk {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    box-shadow: 0 4px 14px rgba(102, 126, 234, 0.45) !important;
    transform: translateY(-1px) !important;
}

/* Active pill text styling */
[data-testid="stPills"] button[aria-pressed="true"] p,
[data-testid="stPills"] button[data-active="true"] p {
    color: white !important;
    font-weight: 700 !important;
}

/* ═══════════════════════════════════════════════════════════════
   RESULTS PAGE - VISUAL COMPRESSION STYLES
   ═══════════════════════════════════════════════════════════════ */

/* Section bar - replaces ### headings */
.section-bar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 0;
    margin-top: 10px;
}

.section-bar__emoji {
    font-size: 1rem;
}

.section-bar__title {
    font-size: 0.9rem;
    font-weight: 700;
    color: #334155;
    letter-spacing: -0.01em;
}

/* Thin divider under section bars */
.section-divider {
    height: 2px;
    background: linear-gradient(90deg, #a855f7 0%, #8b5cf6 50%, transparent 100%);
    margin-bottom: 10px;
    border-radius: 1px;
}

/* Horizontal metrics ribbon - compact strip at top */
.metrics-ribbon {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 6px 12px;
    background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
    border-radius: 10px;
    margin-bottom: 10px;
    justify-content: center;
    align-items: center;
}

.ribbon-item {
    color: white;
    font-size: 0.8rem;
    font-weight: 600;
    padding: 2px 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    white-space: nowrap;
}

/* Stats ribbon - horizontal metrics display */
.stats-ribbon {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    padding: 8px 12px;
    background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
    border-radius: 10px;
    border: 1px solid #e9d5ff;
    margin-bottom: 10px;
    justify-content: space-around;
}

.stats-ribbon__item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2px 12px;
    min-width: 75px;
}

.stats-ribbon__value {
    font-size: 1rem;
    font-weight: 800;
    background: linear-gradient(135deg, #a855f7, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.stats-ribbon__label {
    font-size: 0.65rem;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    margin-top: 1px;
}

/* Compact badges */
.filter-badge {
    display: inline-block;
    padding: 3px 10px;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-left: 3px solid #0ea5e9;
    border-radius: 4px;
    font-size: 0.8rem;
    color: #0c4a6e;
    margin-bottom: 6px;
}

.info-badge {
    display: inline-block;
    padding: 3px 10px;
    background: #f0f9ff;
    border-radius: 16px;
    font-size: 0.8rem;
    color: #0369a1;
    margin: 3px 0;
}

.success-badge {
    display: inline-block;
    padding: 3px 10px;
    background: #f0fdf4;
    border-radius: 16px;
    font-size: 0.8rem;
    color: #166534;
    margin: 3px 0;
}

.transparency-badge {
    display: inline-block;
    padding: 4px 12px;
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    border-radius: 6px;
    font-size: 0.75rem;
    color: #92400e;
    margin: 6px 0;
    border: 1px solid #fcd34d;
}

/* Responsive: Stack on small screens */
@media (max-width: 768px) {
    .metrics-ribbon {
        flex-direction: column;
        align-items: stretch;
    }
    
    .ribbon-item {
        text-align: center;
    }
    
    .stats-ribbon {
        flex-direction: column;
    }
    
    .stats-ribbon__item {
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
    }
}

/* ═══════════════════════════════════════════════════════════════
   UNIFORM VISUALIZATION FONT SIZES
   Consistent font sizing across all figures and visualizations
   ═══════════════════════════════════════════════════════════════ */

/* Matplotlib/Plotly figure containers */
.stPlotlyChart, .stPyplot, [data-testid="stImage"] {
    font-size: 11px !important;
}

/* Figure captions and labels */
.stCaption, figcaption {
    font-size: 0.9rem !important;
    color: #64748b !important;
    font-weight: 500 !important;
}

/* Visualization title styling */
.viz-title {
    font-size: 0.95rem !important;
    font-weight: 700 !important;
    color: #334155 !important;
    margin-bottom: 0.5rem !important;
}

/* Chart axis labels */
.chart-axis-label {
    font-size: 10px !important;
    font-weight: 600 !important;
}

/* Legend text */
.chart-legend-text {
    font-size: 9px !important;
    font-weight: 500 !important;
}

/* ═══════════════════════════════════════════════════════════════
   THIN BOX STYLING FOR ALL CARDS AND CONTAINERS
   Properly aligned text with thinner borders
   ═══════════════════════════════════════════════════════════════ */

/* Generic thin card styling */
.thin-card {
    padding: 0.3rem 0.6rem !important;
    border-radius: 6px !important;
    border-width: 1px !important;
}

/* Thin section header boxes */
.section-header-thin {
    padding: 0.25rem 0.5rem !important;
    border-radius: 5px !important;
    border-left-width: 2px !important;
    margin-bottom: 0.3rem !important;
}

/* Thin info boxes */
.info-box-thin {
    padding: 0.3rem 0.5rem !important;
    border-radius: 5px !important;
    border-width: 1px !important;
    line-height: 1.25 !important;
}

/* Properly aligned text in boxes */
.aligned-text-box h4,
.aligned-text-box h5,
.aligned-text-box p {
    margin: 0 !important;
    text-align: left !important;
}

/* Compact container spacing */
.stContainer {
    padding: 0.3rem !important;
}
